# Cursor 高效使用指南

## 📚 目录
1. [Cursor 简介](#cursor-简介)
2. [核心功能](#核心功能)
3. [高效使用技巧](#高效使用技巧)
4. [最佳实践](#最佳实践)
5. [常见场景](#常见场景)
6. [进阶技巧](#进阶技巧)

---

## Cursor 简介

Cursor 是一个基于 AI 的代码编辑器，它结合了 VS Code 的强大功能和 AI 辅助编程能力。它可以帮助你：
- 快速理解代码库
- 自动生成代码
- 重构和优化代码
- 调试和修复错误
- 编写文档和注释

---

## 核心功能

### 1. **Chat（对话功能）**
- **快捷键**: `Ctrl+L` (Windows) / `Cmd+L` (Mac)
- **用途**: 与 AI 进行对话，询问代码问题、请求代码生成等
- **最佳实践**:
  - 提供清晰的上下文（打开相关文件）
  - 使用具体的问题描述
  - 可以引用代码片段

### 2. **Composer（组合器）**
- **快捷键**: `Ctrl+I` (Windows) / `Cmd+I` (Mac)
- **用途**: 进行多文件编辑和大型重构
- **最佳实践**:
  - 适合跨文件的重构任务
  - 可以同时编辑多个文件
  - 适合实现完整功能

### 3. **Inline Edit（行内编辑）**
- **快捷键**: `Ctrl+K` (Windows) / `Cmd+K` (Mac)
- **用途**: 快速编辑当前选中的代码
- **最佳实践**:
  - 选中代码后按快捷键
  - 适合小范围的代码修改
  - 快速重构单个函数或方法

### 4. **代码补全（Tab 补全）**
- **自动触发**: 输入代码时自动出现
- **用途**: AI 自动补全代码
- **最佳实践**:
  - 写注释描述需求，AI 会生成代码
  - 输入函数名，AI 会补全实现
  - 按 `Tab` 接受建议

### 5. **代码搜索（Codebase Search）**
- **用途**: 语义搜索整个代码库
- **最佳实践**:
  - 使用自然语言提问
  - 例如："如何实现用户登录？"
  - 例如："在哪里处理订单状态？"

---

## 高效使用技巧

### 技巧 1: 提供充分的上下文

**❌ 不好的提问方式：**
```
"修复这个错误"
```

**✅ 好的提问方式：**
```
"这个函数在用户登录时被调用，但是返回了 undefined。请检查代码逻辑并修复。"
```

**如何提供上下文：**
1. 打开相关的文件（Cursor 会自动读取打开的文件）
2. 选中相关的代码片段
3. 在提问中说明业务场景和预期行为

### 技巧 2: 使用具体的指令

**❌ 模糊的指令：**
```
"优化这个组件"
```

**✅ 具体的指令：**
```
"优化这个 React 组件的性能，使用 React.memo 和 useMemo 避免不必要的重渲染，并添加加载状态"
```

### 技巧 3: 分步骤完成任务

对于复杂任务，分步骤进行：

1. **第一步**: "请分析这个组件的结构，列出需要优化的点"
2. **第二步**: "根据分析结果，重构这个组件"
3. **第三步**: "添加单元测试覆盖主要功能"

### 技巧 4: 利用代码引用

在 Chat 中，可以引用代码：
- 使用 `@文件名` 引用特定文件
- 使用 `@代码片段` 引用选中的代码
- 使用 `@函数名` 引用特定函数

**示例：**
```
请优化 @index.tsx 中的 handleSubmit 函数，添加错误处理和加载状态
```

### 技巧 5: 使用 Composer 进行大型重构

对于需要修改多个文件的任务，使用 Composer：

1. 按 `Ctrl+I` 打开 Composer
2. 描述要完成的任务
3. Cursor 会自动识别需要修改的文件
4. 审查所有更改后一次性应用

**示例任务：**
```
重构用户认证系统：
1. 将登录逻辑提取到独立的 hook (useAuth)
2. 创建 AuthContext 管理全局认证状态
3. 更新所有使用认证的组件使用新的 Context
```

---

## 最佳实践

### 1. **代码审查流程**

使用 Cursor 时，始终：
- ✅ 审查 AI 生成的代码
- ✅ 理解代码逻辑后再应用
- ✅ 运行测试确保功能正常
- ✅ 检查是否有安全漏洞

### 2. **提问策略**

**结构化提问模板：**
```
背景：[说明当前情况]
目标：[说明想要达到的目标]
约束：[说明限制条件]
示例：[提供示例代码或预期结果]
```

**示例：**
```
背景：我在开发一个订单列表页面，需要显示订单状态
目标：创建一个可复用的订单状态组件，支持不同状态的颜色显示
约束：使用 Taro 框架，需要兼容小程序
示例：状态包括：待审核(灰色)、生产中(蓝色)、已完成(绿色)
```

### 3. **代码生成后的处理**

1. **检查代码质量**
   - 是否有语法错误？
   - 是否符合项目规范？
   - 是否有类型错误？

2. **测试功能**
   - 手动测试功能
   - 运行单元测试
   - 检查边界情况

3. **优化和重构**
   - 检查性能
   - 优化代码结构
   - 添加注释和文档

### 4. **学习代码库**

使用 Cursor 快速理解新项目：

```
1. "请分析这个项目的整体结构"
2. "这个组件的主要功能是什么？"
3. "这个函数在哪里被调用？"
4. "请解释这段代码的逻辑"
```

---

## 常见场景

### 场景 1: 添加新功能

**步骤：**
1. 打开相关文件
2. 使用 Chat 描述功能需求
3. 审查生成的代码
4. 测试功能
5. 提交代码

**示例：**
```
在订单详情页面添加"取消订单"功能：
- 添加取消按钮
- 实现取消逻辑（调用 API）
- 添加确认对话框
- 更新订单状态显示
```

### 场景 2: 修复 Bug

**步骤：**
1. 选中出错的代码
2. 描述错误现象和预期行为
3. 让 AI 分析问题
4. 应用修复方案
5. 验证修复

**示例：**
```
这段代码在用户未登录时会报错。请添加登录状态检查，如果未登录则跳转到登录页面。
```

### 场景 3: 重构代码

**步骤：**
1. 使用 Composer (`Ctrl+I`)
2. 描述重构目标
3. 审查所有更改
4. 运行测试确保功能正常

**示例：**
```
重构这个组件：
- 将业务逻辑提取到自定义 Hook
- 将 UI 组件拆分为更小的子组件
- 使用 TypeScript 添加类型定义
- 优化性能（使用 memo 和 useMemo）
```

### 场景 4: 编写文档

**步骤：**
1. 选中要文档化的代码
2. 请求生成文档
3. 审查和编辑文档

**示例：**
```
请为这个函数生成 JSDoc 注释，包括：
- 函数功能描述
- 参数说明
- 返回值说明
- 使用示例
```

### 场景 5: 代码审查

**步骤：**
1. 选中代码
2. 请求代码审查
3. 根据建议优化

**示例：**
```
请审查这段代码，检查：
- 是否有潜在的性能问题
- 是否有安全漏洞
- 是否符合最佳实践
- 是否有改进建议
```

---

## 进阶技巧

### 1. **使用 .cursorrules 文件**

在项目根目录创建 `.cursorrules` 文件，定义项目特定的规则：

```markdown
# 项目编码规范

- 使用 TypeScript
- 使用函数式组件和 Hooks
- 使用 Taro 框架开发小程序
- 组件命名使用 PascalCase
- 函数命名使用 camelCase
- 使用 ESLint 和 Prettier
- 所有组件必须有 TypeScript 类型定义
```

### 2. **利用代码库搜索**

使用语义搜索快速找到相关代码：

```
"在哪里处理用户登录？"
"订单状态是如何更新的？"
"如何实现数据缓存？"
```

### 3. **批量操作**

使用 Composer 进行批量操作：

```
为所有页面组件添加：
1. TypeScript 类型定义
2. 错误边界处理
3. 加载状态显示
```

### 4. **学习新技术**

使用 Cursor 学习新技术：

```
"请解释 React Hooks 的工作原理，并给出使用示例"
"如何在 Taro 中实现页面间传参？"
"请解释 TypeScript 的泛型，并给出实际应用场景"
```

### 5. **调试技巧**

```
"这段代码为什么没有按预期工作？请分析可能的原因"
"请添加 console.log 帮助调试这个问题"
"这个错误是什么原因导致的？如何修复？"
```

---

## 实用快捷键速查

| 功能 | Windows | Mac |
|------|---------|-----|
| 打开 Chat | `Ctrl+L` | `Cmd+L` |
| 打开 Composer | `Ctrl+I` | `Cmd+I` |
| 行内编辑 | `Ctrl+K` | `Cmd+K` |
| 接受补全 | `Tab` | `Tab` |
| 拒绝补全 | `Esc` | `Esc` |
| 查看建议 | `Ctrl+→` | `Cmd+→` |

---

## 注意事项

### ⚠️ 不要完全依赖 AI

- AI 生成的代码可能有错误
- 始终要理解代码逻辑
- 运行测试验证功能
- 审查代码质量

### ⚠️ 保护敏感信息

- 不要在代码中包含 API 密钥
- 不要上传包含敏感信息的代码
- 使用环境变量管理配置

### ⚠️ 遵守代码规范

- 遵循项目编码规范
- 保持代码风格一致
- 添加必要的注释和文档

---

## 学习路径建议

### 第 1 周：基础功能
- [ ] 熟悉 Chat 功能
- [ ] 学会使用代码补全
- [ ] 练习行内编辑

### 第 2 周：进阶功能
- [ ] 掌握 Composer 使用
- [ ] 学习代码库搜索
- [ ] 练习代码重构

### 第 3 周：最佳实践
- [ ] 创建 .cursorrules 文件
- [ ] 优化提问技巧
- [ ] 建立工作流程

### 第 4 周：高级技巧
- [ ] 批量操作和重构
- [ ] 代码审查和优化
- [ ] 文档生成和维护

---

## 常见问题 FAQ

### Q: AI 生成的代码不符合项目规范怎么办？
A: 在 Chat 中说明项目规范，或者创建 `.cursorrules` 文件。

### Q: 如何让 AI 理解我的业务逻辑？
A: 提供充分的上下文，包括业务场景、相关文件和代码示例。

### Q: 生成的代码有错误怎么办？
A: 将错误信息提供给 AI，让它分析并修复。也可以手动修复后让 AI 解释原因。

### Q: 如何提高 AI 回答的质量？
A: 
- 提供清晰的上下文
- 使用具体的指令
- 分步骤完成任务
- 及时反馈和纠正

---

## 总结

Cursor 是一个强大的 AI 编程助手，但要高效使用它，需要：

1. **理解工具**: 熟悉各种功能和快捷键
2. **提供上下文**: 让 AI 理解你的需求
3. **审查代码**: 始终审查 AI 生成的代码
4. **持续学习**: 通过实践不断提高使用技巧
5. **建立规范**: 使用 .cursorrules 统一代码风格

记住：Cursor 是助手，不是替代品。理解代码、思考逻辑、做出决策仍然是你的工作。

---

**开始你的 Cursor 学习之旅吧！** 🚀

